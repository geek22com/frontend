{% import 'common/macros.html' as macros %}

{% macro table(suboffers, user=none, show_all=false) %}
	<table class="bordered-table zebra-striped nosort suboffers-table">
		<thead>
			<tr>
				<th class="header">Название</th>
				<th class="header">Тип выплат</th>
				<th class="header right">Оплата</th>
				<th class="header center">Многократное<br />прохождение</th>
				<th class="header right">Время<br />холда</th>
				{{ caller(true, none) }}
			</tr>
		</thead>
		<tbody>
			{% for suboffer in suboffers if show_all or suboffer.active %}
			<tr>
				<td>{{ suboffer.title }}</td>
				<td>{{ suboffer.payment_type }}</td>
				<td class="right">
					{{ suboffer.value(tax=user.fee if user.is_affiliate else 0) }}&nbsp;{{ suboffer.value_measure_short }}
				</td>
				<td class="center">{{ macros.to_icon(suboffer.reentrant) }}</td>
				<td class="right">{{ suboffer.hold_days -}}&nbsp;дней</td>
				{{ caller(false, suboffer) }}
			</tr>
			{% endfor %}
		</tbody>
	</table>
{% endmacro %}
